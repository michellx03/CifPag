package br.com.cifpag.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

import br.com.cifpag.entity.Cidade;
import br.com.cifpag.entity.DadosUsuario;
import br.com.cifpag.entity.Endereco;
import br.com.cifpag.entity.Usuario;
import br.com.cifpag.model.DadosUsuarioModel;
import br.com.cifpag.model.UsuarioModel;
import br.com.cifpag.daoGenericos.CidadeDao;
import br.com.cifpag.daoGenericos.CidadeDaoImplementacao;
import br.com.cifpag.daoGenericos.DadosUsuarioDao;
import br.com.cifpag.daoGenericos.DadosUsuarioImplementacao;
import br.com.cifpag.daoGenericos.EnderecoDao;
import br.com.cifpag.daoGenericos.EnderecoDaoImplementacao;

@Controller
@RequestMapping("/DadosUsuario")
public class DadosUsuarioController {
	
	@RequestMapping(value = "/PerfilUsuario")
	public ModelAndView ViewDashboardAlteracao(String usuario) {
		ModelAndView view = new ModelAndView("DadosUsuario/PerfilUsuario");
		view.addObject("usuario", usuario);
		return view;
	}
	
	@RequestMapping(value = "/SalvarDadosPessoais")
	public String SalvarDadosPessoais(DadosUsuario dadosUsuario) {
			
		DadosUsuarioModel usu = new DadosUsuarioModel();
			if(usu.Salvar(dadosUsuario).equals("sucesso")){
				return "redirect:/DadosUsuario/PerfilUsuario?mensagem=sucesso";
			}else{
				return "redirect:/DadosUsuario/PerfilUsuario?mensagem=falha";
		}

	}
	
	@RequestMapping(value = "/Consulta")
	public ModelAndView ViewDashboardIndex() {
		ModelAndView view = new ModelAndView("DadosUsuario/Consulta");
		return view;

	}
	
	@RequestMapping(value = "/Cadastro")
	public ModelAndView Cadastro() {
		DadosUsuario dadosUsuario = new DadosUsuario();
		ModelAndView view = new ModelAndView("DadosUsuario/CadastroOrEditar");
		view.addObject("dadosUsuario", dadosUsuario);
		return view;

	}
	
	@RequestMapping(value = "/Editar")
	public ModelAndView Editar(@RequestParam("id") int id) {
		DadosUsuarioDao dao = new DadosUsuarioImplementacao();
		DadosUsuario dadosUsuario = dao.getById(DadosUsuario.class , id);
		
		ModelAndView view = new ModelAndView("DadosUsuario/CadastroOrEditar");		
		view.addObject("dadosUsuario", dadosUsuario);
		return view;

	}

}
